# coding: utf-8

import requests
from lxml import etree


def grab(bl_num='QDWJ161210567'):

    session = requests.session()
    session.get("http://www.eimskipdepot.com/querydata/billquerysearch.aspx")
    login_data = {
        '__VIEWSTATE': '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',
        'ctl00$Maincontent$txtBillNo': bl_num.strip(),
        'ctl00$Maincontent$btnSearch': u'查询'
    }
    response = session.post("http://www.eimskipdepot.com/querydata/billquerysearch.aspx", data=login_data)

    html = etree.HTML(response.text.encode(response.encoding))

    info_html = html.xpath("//div[@id='Maincontent_divform']")

    if len(info_html) > 0:

        elem_links = info_html[0].xpath("//a")
        for elem_link in elem_links:
            elem_link.set("href", "#")

        elem_tables = info_html[0].xpath("//table")
        for elem_table in elem_tables:
            elem_table.set("style", "")

        info = etree.tostring(info_html[0], pretty_print=True)
    else:
        info = None
    session.close()

    return info


if __name__ == '__main__':
    grab()
